{"version":3,"file":"src_app_custom-elements_api_api-list_module_ts.d609be5e4bf3721a.js","mappings":"0SA4BaA,EAAU,MADvB,MACaA,EAaX,YAAIC,GAEF,OAAIC,KAAKC,YACPD,KAAKC,WAAY,EACjBD,KAAKE,gBAGLF,KAAKG,UAAUC,UAAUL,GAAYC,KAAKK,OAAOC,IAAI,sBAAsBP,EAASQ,uBAG/EP,KAAKG,UAAUK,QAAKC,KAAIV,IAC7BA,EAASW,QAAQC,IACfA,EAAQC,aAAeD,EAAQE,OAC3BF,EAAQE,MAAMC,MAAMC,GAA2B,eAAnBA,EAAKC,UAA0B,EAChE,GAEL,CAEAC,YAAoBC,EAA0Bb,GAA1BL,KAAAkB,OAA0BlB,KAAAK,SA7BtCL,KAAAmB,QAAUC,KAAyB,OACnCpB,KAAAqB,mBAAqB,gBACrBrB,KAAAC,WAAY,EACZD,KAAAsB,UAAY,IAAIC,IAChBvB,KAAAwB,gBAAkB,IAAIC,IAA4B,GAClDzB,KAAAG,UAAYH,KAAKwB,gBAAgBhB,QAAKkB,KAAU1B,KAAKsB,WAwBG,CAEhEK,cACE3B,KAAKsB,UAAUM,MACjB,CASA1B,cAAc2B,GAEZ,MAAMC,EAAM9B,KAAKmB,SAAWU,GAAO7B,KAAKqB,oBACxCrB,KAAKkB,KAAKa,IAAkBD,GACzBtB,QACCkB,KAAU1B,KAAKsB,YAAS,EACxBb,KAAI,IAAMT,KAAKK,OAAOC,IAAI,yBAAyBwB,OAEpD1B,UAAU,CACTwB,KAAM7B,GAAYC,KAAKwB,gBAAgBI,KAAK7B,GAC5CiC,MAAQC,IAEN,MAAAjC,KAAKK,OAAO2B,MAAMC,GACZA,IAGd,CAACC,SAAAlC,KAAA,mBAAAmC,iBA5DUrC,GAAUsC,MAAAC,MAAAD,MAAAE,KAAA,EAAAJ,SAAAlC,KAAA,WAAAuC,EAAAC,IAAA,OAAV1C,EAAU2C,QAAV3C,EAAU4C,mBAAV5C,CAAU,4DCdjBsC,MAAA,wBAYEA,MAAA,2FAPJA,MAAA,UAMIA,MAAA,yBAAAO,EAAAP,MAAAQ,GAAAC,MAAAC,EAAAV,MAAA,UAASA,MAAAU,EAAAC,OAAAJ,GAAS,GAClBP,MAAA,EAAAY,EAAA,sBACJZ,oEANIA,MAAA,WAAAa,IAAAC,EAAAC,SAAAf,CAAsC,UAAAc,EAAAE,mBAAAT,GAGtCP,MAAA,KAAAc,EAAAG,UAAA,WAAAV,GAFAP,MAAA,gBAAAa,IAAAC,EAAAC,UAIef,cAAA,mBAAAkB,EAAAlB,CAAkC,0BAAAA,MAAA,EAAAmB,EAAAN,EAAAO,MAAAP,EAAAQ,kCATvDrB,MAAA,YAEEA,MAAA,EAAAsB,EAAA,aASFtB,8BAXqDA,MAAA,KAAAuB,EAAAN,WAE5BjB,MAAA,GAAAA,MAAA,UAAAuB,EAAAC,mCAYzBxB,MAAA,SAAAA,CAAwB,YAAQA,MAAA,GAASA,iCAATA,MAAA,GAAAA,MAAAyB,EAAAC,gCAAyB1B,MAAA,qCAAyBA,MAAA,UAAA2B,EAAA,8BAAlF3B,MAAA,EAAA4B,EAAA,cAAA5B,CAAyD,EAAA6B,EAAA,eAAyD7B,MAAA,UAAMA,MAAA,GAASA,sDAA1HA,MAAA,OAAA8B,GAAyD9B,cAAA,OAAA+B,EAAAC,YAAwDhC,MAAA,GAAAA,MAAAiC,wDCpB7GC,EAAe,MAJ5B,MAIaA,EAAepC,SACnBlC,KAAAuE,iBAAmB,EAqB1B,eAAIC,GACF,OAAOxE,KAAKyE,YACd,CAEA,eAAID,CAAYA,GACVxE,KAAK0E,WACJ1E,KAAKwE,cAAgBA,GACtBxE,KAAK2E,eAAeC,KAAKJ,GAE3BxE,KAAKyE,aAAeD,EAExB,CAMAvD,YAAoB4D,GAAA7E,KAAA6E,cA/BV7E,KAAA8E,OAAS,IAAIC,MAEb/E,KAAA2E,eAAiB,IAAII,MAEtB/E,KAAAoE,YAAa,EAEbpE,KAAA8D,MAAQ,GAMT9D,KAAAyE,cAAe,EAevBzE,KAAAqD,UAAY,uBAAuBiB,EAAgBC,mBAEnDvE,KAAAoD,iBAAmB,CAE2B,CAE9C4B,WACEhF,KAAK8D,MAAQ9D,KAAK8D,OAAS,EAC7B,CAEAmB,gBACEjF,KAAKwE,aAAexE,KAAKwE,WAC3B,CAEAU,cACElF,KAAKwE,aAAc,CACrB,CAEAzB,OAAOF,GACL,MAAMsC,EAASnF,KAAK4D,QAAQf,GAC5B7C,KAAKmD,SAAWgC,EAChBnF,KAAK8E,OAAOF,KAAK,CAACO,SAAQtC,UAC1B7C,KAAKkF,aACP,CAGAE,QAAQC,GAEDrF,KAAK6E,YAAYS,cAAcC,SAASF,IAC3CrF,KAAKkF,aAET,CAEAM,cAAcC,GACZ,MAAMC,EAAoBC,IACxB,GAAI3F,KAAKwE,YAKPmB,QALoB,CACpB3F,KAAKwE,aAAc,EACnB,MAAMoB,EAAoB5F,KAAK4D,SAAY5D,KAAKmD,SAAiBnD,KAAK4D,QAAQiC,QAAQ7F,KAAKmD,WAA/B,EAC5DnD,KAAKoD,iBAAmBwC,EAAkB,EAAIA,EAAkB,IAKpE,OAAOH,EAAMK,KACX,IAAK,YACHJ,EAAiB,IACf1F,KAAKoD,iBAAmB2C,KAAKC,IAAIhG,KAAKoD,iBAAmB,GAAIpD,KAAK4D,SAASrD,QAAU,GAAK,IAE5F,MACF,IAAK,UACHmF,EAAiB,IAAM1F,KAAKoD,iBAAmB2C,KAAKE,IAAIjG,KAAKoD,iBAAmB,EAAG,IACnF,MACF,IAAK,SACHpD,KAAKkF,cACL,MACF,IAAK,MACAlF,KAAKwE,aACNxE,KAAK+C,OAAO/C,KAAKoD,kBAEnB,MACF,IAAK,QACL,IAAK,QACL,IAAK,IACHsC,EAAiB,IAAM1F,KAAK+C,OAAO/C,KAAKoD,mBAG3B,QAAdqC,EAAMK,KACPL,EAAMS,gBAEV,CAAChE,SAAAlC,KAAA,mBAAAmC,iBAxGUmC,GAAelC,aAAA,EAAAF,SAAAlC,KAAA,UAAAuC,EAAA4D,IAAA,MAAf7B,EAAe8B,UAAA,iBAAAC,UAAA,SAAAC,EAAAC,MAAA,EAAAD,aAkBIE,2HAlBnBD,EAAAnB,QAAAqB,EAAAC,OAAsB,KAAAtE,gvBDXnCA,MAAA,UAAAA,CAA8B,WAK1BA,MAAA,0BAASmE,EAAAtB,eAAe,EAAxB7C,CAAyB,mBAAAqE,GAAA,OACdF,EAAAf,cAAAiB,EAAqB,GAOhCrE,MAAA,WACEA,MAAA,EAAAuE,EAAA,sBACFvE,UAEFA,MAAA,EAAAwE,EAAA,YAYFxE,QACAA,MAAA,EAAAyE,EAAA,yBAAAzE,oCApBIA,cAAA,WAAAmE,EAAA7B,UAPAtC,MAAA,gBAAAmE,EAAAlD,UAAAjB,CAAgC,gBAAAmE,EAAA/B,YAAhCpC,CAAgC,wBAAAmE,EAAAnD,kBAAA,GAAAmD,EAAA/B,YAAA+B,EAAAlD,UAAA,WAAAkD,EAAAnD,iBAAA,KAAhChB,CAAgC,aAAAmE,EAAAzC,OAAA,QAAAgD,EAAA,MAAAP,EAAApD,SAAA,KAAAoD,EAAApD,SAAAM,aAAAsD,IAAAD,IAAA,KAWf1E,MAAA,GAAAA,MAAA,mBAAAkB,EAAAlB,CAAkC,0BAAAA,MAAA,EAAA4E,EAAA,MAAAT,EAAApD,SAAA,KAAAoD,EAAApD,SAAAK,MAAA,MAAA+C,EAAApD,SAAA,KAAAoD,EAAApD,SAAAM,QAGnBrB,cAAA,OAAAmE,EAAA/B,sECNvBF,CAAe,iDCaxBlC,MAAA,OAAAA,CAA0B,UAA0EA,MAAA,GAAiBA,0CAAlEA,cAAA,sBAAA6E,EAAArG,YAAtBwB,MAAA,OAAA6E,EAAAC,KAAA9E,OAAuEA,cAAA6E,EAAAxD,iCAElGrB,MAAA,GACEA,MAAA,UAAAA,CAAqB,UAEjBA,MAAA,UACAA,MAAA,GACFA,UAEJA,kCAL0BA,MAAA,GAAAA,MAAA,qCAAA+E,EAAAnG,WAAnBoB,MAAA,OAAA+E,EAAAD,KAAA9E,OACKA,cAAA,UAAA+E,EAAAC,QAAA,IACNhF,cAAA,IAAA+E,EAAA1D,MAAA,+BALRrB,MAAA,WACEA,MAAA,EAAAiF,EAAA,sBAQFjF,wCARiCA,cAAA,UAAA6E,EAAApG,iCAHnCuB,MAAA,SACEA,MAAA,EAAAkF,EAAA,WAAAlF,CAA8H,EAAAmF,EAAA,aAWhInF,kCAXOA,cAAA,OAAA6E,EAAApG,OACiBuB,cAAA,OAAA6E,EAAApG,OAAAoG,EAAApG,MAAAN,SCP1B,MAAMiH,EAANvG,cACEjB,KAAAyH,MAAQ,GACRzH,KAAA0H,OAAS,MACT1H,KAAA2H,KAAO,KACT,EAAC,IAMYC,EAAgB,MAJ7B,MAIaA,EAyCX3G,YACU4G,EACAC,GADA9H,KAAA6H,aACA7H,KAAA8H,kBAvCV9H,KAAA+H,gBAAiB,EACjB/H,KAAAgI,cAAe,EAEPhI,KAAAiI,gBAAkB,IAAIxG,IAA8B,GACpDzB,KAAAkI,eAAiB,IAAIV,EAM7BxH,KAAAmI,MAAkB,CAChB,CAAE3E,MAAO,MAAOC,MAAO,gBACvB,CAAED,MAAO,QAASC,MAAO,UACzB,CAAED,MAAO,QAASC,MAAO,gBACzB,CAAED,MAAO,YAAaC,MAAO,sBAC7B,CAAED,MAAO,YAAaC,MAAO,gBAC7B,CAAED,MAAO,UAAWC,MAAO,gBAC3B,CAAED,MAAO,QAASC,MAAO,UACzB,CAAED,MAAO,OAAQC,MAAO,gBACxB,CAAED,MAAO,WAAYC,MAAO,gBAC5B,CAAED,MAAO,YAAaC,MAAO,gBAC7B,CAAED,MAAO,UAAWC,MAAO,UAC3B,CAAED,MAAO,OAAQC,MAAO,gBACxB,CAAGD,MAAO,WAAYC,MAAO,YAC7B,CAAED,MAAO,aAAcC,MAAO,6BAGhCzD,KAAAoI,SAAqB,CACnB,CAAE5E,MAAO,MAAOC,MAAO,gBACvB,CAAED,MAAO,SAAUC,MAAO,gBAC1B,CAAED,MAAO,oBAAqBC,MAAO,kCACrC,CAAED,MAAO,aAAcC,MAAO,gBAC9B,CAAED,MAAO,gBAAiBC,MAAO,4BAOW,CAE9CuB,WACEhF,KAAKqI,oBACDC,KAAc,CACZtI,KAAK6H,WAAW9H,SAChBC,KAAKiI,kBACJzH,QACD+H,KAAKC,KAAczI,SAAUyI,EAAQ,GAAIC,SAAUD,EAAQ,OAAI,EAC/DD,KAAKC,GACAA,EAAQzI,SACJwI,IAAI5H,QAAiBA,EAASE,MAAOb,KAAK0I,cAAc/H,EAAS6H,EAAQC,eAIxFzI,KAAK2I,0BACP,CAIAC,SAASnB,GACPzH,KAAK6I,kBAAkB,CAACpB,OAAQA,GAAS,IAAIqB,cAAcC,QAC7D,CAEAC,UAAUtB,GACR1H,KAAKiJ,mBACLjJ,KAAK0H,OAASA,EACd1H,KAAK6I,kBAAkB,CAACnB,OAAQA,EAAOlE,OACzC,CAEA0F,QAAQvB,GACN3H,KAAKmJ,iBACLnJ,KAAK2H,KAAOA,EACZ3H,KAAK6I,kBAAkB,CAAClB,KAAMA,EAAKnE,OACrC,CAEAyF,mBACEjJ,KAAK+H,gBAAkB/H,KAAK+H,cAC9B,CAEAoB,iBACEnJ,KAAKgI,cAAgBhI,KAAKgI,YAC5B,CAIQU,cAAc/H,GAAuB8G,QAAOC,SAAQC,SAC1D,MAAMyB,GAAsB3B,IAAyC,IAAhC9G,EAAQ0I,KAAKxD,QAAQ4B,GAYpD5G,GAAoBF,EAAQE,OAAS,IAAIyI,OAAOvI,GAHjCA,IACV,QAAT4G,GAAkBA,IAAS5G,EAAKqG,QAGhCmC,CAAYxI,IATSA,IACV,QAAX2G,GACAA,IAAW3G,EAAKC,WACJ,kBAAX0G,GAA8B3G,EAAKyI,cACxB,sBAAX9B,GAAkC3G,EAAK0I,iBAKnBC,CAAc3I,IAXfA,IACpBqI,IAAmD,IAA7BrI,EAAKsI,KAAKxD,QAAQ4B,GAUIkC,CAAa5I,IAG3D,OAAOF,EAAMN,OAASM,EAASuI,GAA+B,YAATzB,EAAsB,GAAK,IAClF,CAGQgB,2BACN,MAAOlB,QAAOC,SAAQC,QAAQ3H,KAAK8H,gBAAgB8B,SAE7CC,GAAKpC,GAAS,IAAIqB,cAExB9I,KAAK8J,QAAQxE,cAAc9B,MAAQqG,EAEnC7J,KAAK0H,OAAS1H,KAAKoI,SAAS2B,KAAKC,GAAKA,EAAExG,QAAUkE,IAAW1H,KAAKoI,SAAS,GAC3EpI,KAAK2H,KAAO3H,KAAKmI,MAAM4B,KAAKC,GAAKA,EAAExG,QAAUmE,IAAS3H,KAAKmI,MAAM,GAEjEnI,KAAKkI,eAAiB,CACpBT,MAAOoC,EACPnC,OAAQ1H,KAAK0H,OAAOlE,MACpBmE,KAAM3H,KAAK2H,KAAKnE,OAGlBxD,KAAKiI,gBAAgBrG,KAAK5B,KAAKkI,eACjC,CAEQ+B,oBACN,MAAOxC,QAAOC,SAAQC,QAAQ3H,KAAKkI,eAOnClI,KAAK8H,gBAAgBoC,UAAU,mBANhB,CACbzC,MAAQA,QAAgBV,EACxBW,OAAmB,QAAXA,EAAmBA,OAASX,EACpCY,KAAmB,QAAXA,EAAmBA,OAASZ,GAIxC,CAEQ8B,kBAAkBJ,GACxBzI,KAAKiI,gBAAgBrG,KAAKuI,OAAOC,OAAOpK,KAAKkI,eAAgBO,IAC7DzI,KAAKiK,mBACP,CAAC/H,SAAAlC,KAAA,mBAAAmC,iBA/IUyF,GAAgBxF,MAAAC,GAAAD,MAAAE,KAAA,EAAAJ,SAAAlC,KAAA,UAAAuC,EAAA4D,IAAA,MAAhByB,EAAgBxB,UAAA,mBAAAC,UAAA,SAAAC,EAAAC,MAAA,EAAAD,wiBD5B7BlE,MAAA,UAAAA,CAAoC,kBAEtBA,MAAA,kBAAAqE,GAAA,OAAUF,EAAA2C,QAAAzC,EAAAtB,OAAsB,GAK5C/C,QAEAA,MAAA,kBAAYA,MAAA,kBAAAqE,GAAA,OAAUF,EAAAyC,UAAAvC,EAAAtB,OAAwB,GAK9C/C,QAEAA,MAAA,UAAAA,CAAyB,eACSA,MAAA,iBAAAqE,GAAA,OAASF,EAAAqC,SAAAnC,EAAAC,OAAAlD,MAAmC,GAA5EpB,QACAA,MAAA,UAA2BA,MAAA,YAAMA,YAIrCA,MAAA,eACEA,MAAA,EAAAiI,EAAA,+BAaFjI,eAjCcA,cAAA,UAAAmE,EAAA4B,MAAA/F,CAAiB,WAAAmE,EAAAoB,KAAjBvF,CAAiB,iBAOjBA,cAAA,UAAAmE,EAAA6B,SAAAhG,CAAoB,WAAAmE,EAAAmB,OAApBtF,CAAoB,uBAAAmE,EAAAoB,KAAAnE,OAaPpB,MAAA,GAAAA,MAAA,UAAAA,MAAA,KAAAmE,EAAA8B,6ECKdT,CAAgB,KCfhB0C,EAAa,MAL1B,MAKaA,EALbrJ,cAMEjB,KAAAuK,uBAAoC3C,EACrC1F,SAAAlC,KAAA,mBAAAmC,iBAFYmI,EAAa,EAAApI,SAAAlC,KAAA,UAAAuC,EAAAiI,IAAA,MAAbF,IAAapI,SAAAlC,KAAA,UAAAuC,EAAAkI,IAAA,WAFb,CAAE3K,GAAY4K,QAAA,CAFdC,KAAcC,IAAcC,eAI5BP,CAAa","names":["ApiService","sections","this","firstTime","fetchSections","_sections","subscribe","logger","log","length","pipe","tap","forEach","section","deprecated","items","every","item","stability","constructor","http","apiBase","DOC_CONTENT_URL_PREFIX","apiListJsonDefault","onDestroy","Subject","sectionsSubject","ReplaySubject","takeUntil","ngOnDestroy","next","src","url","get","error","err","static","t","i0","i1","i2","core","wxM","factory","ɵfac","i_r7","_r10","index","ctx_r9","select","SelectComponent_ul_4_li_2_ng_container_1_Template","option_r6","ctx_r5","selected","currentOptionIdx","listBoxId","_r3","_c1","value","title","SelectComponent_ul_4_li_2_Template","ctx_r1","options","ctx_r14","label","value_r12","SelectComponent_ng_template_5_span_0_Template","SelectComponent_ng_template_5_span_1_Template","showLabel_r11","ctx_r2","showSymbol","title_r13","SelectComponent","instancesCounter","showOptions","_showOptions","disabled","optionsToggled","emit","hostElement","change","EventEmitter","ngOnInit","toggleOptions","hideOptions","option","onClick","eventTarget","nativeElement","contains","handleKeydown","event","runOrOpenOptions","fn","indexOfSelected","indexOf","key","Math","min","max","preventDefault","In1","selectors","viewQuery","rf","ctx","ElementRef","$event","target","SelectComponent_ng_container_3_Template","SelectComponent_ul_4_Template","SelectComponent_ng_template_5_Template","tmp_4_0","undefined","_c2","section_r2","path","item_r7","docType","ApiListComponent_div_9_ul_2_ng_container_1_Template","ApiListComponent_div_9_h2_1_Template","ApiListComponent_div_9_ul_2_Template","SearchCriteria","query","status","type","ApiListComponent","apiService","locationService","showStatusMenu","showTypeMenu","criteriaSubject","searchCriteria","types","statuses","filteredSections","combineLatest","map","results","criteria","filterSection","initializeSearchCriteria","setQuery","setSearchCriteria","toLowerCase","trim","setStatus","toggleStatusMenu","setType","toggleTypeMenu","sectionNameMatches","name","filter","matchesType","securityRisk","developerPreview","matchesStatus","matchesQuery","search","q","queryEl","find","x","setLocationSearch","setSearch","Object","assign","ApiListComponent_div_9_Template","ApiListModule","customElementComponent","a4G","s3X","imports","CommonModule","SharedModule","HttpClientModule"],"sourceRoot":"webpack:///","sources":["./src/app/custom-elements/api/api.service.ts","./src/app/shared/select/select.component.html","./src/app/shared/select/select.component.ts","./src/app/custom-elements/api/api-list.component.html","./src/app/custom-elements/api/api-list.component.ts","./src/app/custom-elements/api/api-list.module.ts"],"sourcesContent":["import { Injectable, OnDestroy } from '@angular/core';\nimport { HttpClient, HttpErrorResponse } from '@angular/common/http';\n\nimport { ReplaySubject, Subject } from 'rxjs';\nimport { takeUntil, tap } from 'rxjs/operators';\n\nimport { Logger } from 'app/shared/logger.service';\nimport { DOC_CONTENT_URL_PREFIX } from 'app/documents/document.service';\n\nexport interface ApiItem {\n  name: string;\n  title: string;\n  path: string;\n  docType: string;\n  stability: string;\n  securityRisk: boolean;\n  developerPreview: boolean;\n}\n\nexport interface ApiSection {\n  path: string;\n  name: string;\n  title: string;\n  deprecated: boolean;\n  items: ApiItem[]|null;\n}\n\n@Injectable()\nexport class ApiService implements OnDestroy {\n\n  private apiBase = DOC_CONTENT_URL_PREFIX + 'api/';\n  private apiListJsonDefault = 'api-list.json';\n  private firstTime = true;\n  private onDestroy = new Subject<void>();\n  private sectionsSubject = new ReplaySubject<ApiSection[]>(1);\n  private _sections = this.sectionsSubject.pipe(takeUntil(this.onDestroy));\n\n  /**\n   * Return a cached observable of API sections from a JSON file.\n   * API sections is an array of Angular top modules and metadata about their API documents (items).\n   */\n  get sections() {\n\n    if (this.firstTime) {\n      this.firstTime = false;\n      this.fetchSections(); // TODO: get URL for fetchSections by configuration?\n\n      // makes sectionsSubject hot; subscribe ensures stays alive (always refCount > 0);\n      this._sections.subscribe(sections => this.logger.log(`ApiService got API ${sections.length} section(s)`));\n    }\n\n    return this._sections.pipe(tap(sections => {\n      sections.forEach(section => {\n        section.deprecated = !!section.items &&\n            section.items.every(item => item.stability === 'deprecated');\n      });\n    }));\n  }\n\n  constructor(private http: HttpClient, private logger: Logger) { }\n\n  ngOnDestroy() {\n    this.onDestroy.next();\n  }\n\n /**\n  * Fetch API sections from a JSON file.\n  * API sections is an array of Angular top modules and metadata about their API documents (items).\n  * Updates `sections` observable\n  *\n  * @param [src] - Name of the api list JSON file\n  */\n  fetchSections(src?: string) {\n    // TODO: get URL by configuration?\n    const url = this.apiBase + (src || this.apiListJsonDefault);\n    this.http.get<ApiSection[]>(url)\n      .pipe(\n        takeUntil(this.onDestroy),\n        tap(() => this.logger.log(`Got API sections from ${url}`)),\n      )\n      .subscribe({\n        next: sections => this.sectionsSubject.next(sections),\n        error: (err: HttpErrorResponse) => {\n          // TODO: handle error\n          this.logger.error(err);\n          throw err; // rethrow for now.\n        },\n      });\n  }\n}\n","<div class=\"form-select-menu\">\n  <div class=\"form-select-button\"\n    role=\"combobox\"\n    [attr.aria-controls]=\"listBoxId\"\n    aria-haspopup=\"listbox\"\n    (click)=\"toggleOptions()\"\n    (keydown)=\"handleKeydown($event)\"\n    [attr.aria-expanded]=\"showOptions\"\n    [attr.aria-activedescendant]=\"currentOptionIdx > -1 && showOptions ? listBoxId + '-option-' + currentOptionIdx : null\"\n    [attr.aria-label]=\"label + (selected?.title ?? '')\"\n    [class.disabled]=\"disabled\"\n    tabindex=\"0\"\n  >\n    <div aria-hidden=\"true\">\n      <ng-container *ngTemplateOutlet=\"optionTemplate; context: { showLabel: true, value: selected?.value, title: selected?.title }\"></ng-container>\n    </div>\n  </div>\n  <ul class=\"form-select-dropdown\" *ngIf=\"showOptions\" [id]=\"listBoxId\" role=\"listbox\" tabIndex=\"-1\" #listBox>\n    <!-- eslint-disable-next-line @angular-eslint/template/click-events-have-key-events -- the key events are handled in the ts class -->\n    <li *ngFor=\"let option of options; index as i\"\n        role=\"option\"\n        [class.selected]=\"option === selected\"\n        [attr.aria-selected]=\"option === selected\"\n        [class.current]=\"currentOptionIdx === i\"\n        [id]=\"listBoxId + '-option-' + i\"\n        (click)=\"select(i)\">\n        <ng-container *ngTemplateOutlet=\"optionTemplate; context: { showLabel: false, value: option.value, title: option.title }\"></ng-container>\n    </li>\n  </ul>\n</div>\n<ng-template #optionTemplate let-showLabel=\"showLabel\" let-value=\"value\" let-title=\"title\">\n  <span *ngIf=\"showLabel\"><strong>{{label}}</strong></span><span *ngIf=\"showSymbol\" class=\"symbol {{value}}\"></span><span>{{title}}</span>\n</ng-template>\n","import { Component, ElementRef, EventEmitter, HostListener, Input, Output, OnInit, ViewChild } from '@angular/core';\n\nexport interface Option {\n  title: string;\n  value?: any;\n}\n\n@Component({\n  selector: 'aio-select',\n  templateUrl: 'select.component.html'\n})\nexport class SelectComponent implements OnInit {\n  static instancesCounter = 0;\n\n  @Input() selected: Option | undefined;\n\n  @Input() options: Option[];\n\n  // eslint-disable-next-line @angular-eslint/no-output-native\n  @Output() change = new EventEmitter<{option: Option, index: number}>();\n\n  @Output() optionsToggled = new EventEmitter<boolean>();\n\n  @Input() showSymbol = false;\n\n  @Input() label = '';\n\n  @Input() disabled: boolean;\n\n  @ViewChild('listBox', { read: ElementRef }) listBox: ElementRef;\n\n  private _showOptions = false;\n\n  get showOptions() {\n    return this._showOptions;\n  }\n\n  set showOptions(showOptions: boolean) {\n    if(!this.disabled) {\n      if(this.showOptions !== showOptions) {\n        this.optionsToggled.emit(showOptions);\n      }\n      this._showOptions = showOptions;\n    }\n  }\n\n  listBoxId = `aio-select-list-box-${SelectComponent.instancesCounter++}`;\n\n  currentOptionIdx = 0;\n\n  constructor(private hostElement: ElementRef) {}\n\n  ngOnInit() {\n    this.label = this.label || '';\n  }\n\n  toggleOptions() {\n    this.showOptions = !this.showOptions;\n  }\n\n  hideOptions() {\n    this.showOptions = false;\n  }\n\n  select(index: number) {\n    const option = this.options[index];\n    this.selected = option;\n    this.change.emit({option, index});\n    this.hideOptions();\n  }\n\n  @HostListener('document:click', ['$event.target'])\n  onClick(eventTarget: HTMLElement) {\n    // Hide the options if we clicked outside the component\n    if (!this.hostElement.nativeElement.contains(eventTarget)) {\n      this.hideOptions();\n    }\n  }\n\n  handleKeydown(event: KeyboardEvent) {\n    const runOrOpenOptions = (fn: () => void): void => {\n      if(!this.showOptions) {\n        this.showOptions = true;\n        const indexOfSelected = (!this.options || !this.selected) ? -1 : this.options.indexOf(this.selected);\n        this.currentOptionIdx = indexOfSelected > 0 ? indexOfSelected : 0;\n      } else {\n        fn();\n      }\n    };\n    switch(event.key) {\n      case 'ArrowDown':\n        runOrOpenOptions(() =>\n          this.currentOptionIdx = Math.min(this.currentOptionIdx + 1, (this.options?.length ?? 0) - 1)\n        );\n        break;\n      case 'ArrowUp':\n        runOrOpenOptions(() => this.currentOptionIdx = Math.max(this.currentOptionIdx - 1, 0));\n        break;\n      case 'Escape':\n        this.hideOptions();\n        break;\n      case 'Tab':\n        if(this.showOptions) {\n          this.select(this.currentOptionIdx);\n        }\n        break;\n      case 'Enter':\n      case 'Space':\n      case ' ':\n        runOrOpenOptions(() => this.select(this.currentOptionIdx));\n        break;\n    }\n    if(event.key !== 'Tab') {\n      event.preventDefault();\n    }\n  }\n}\n","<div class=\"l-flex-wrap api-filter\">\n\n  <aio-select (change)=\"setType($event.option)\"\n              [options]=\"types\"\n              [selected]=\"type\"\n              [showSymbol]=\"true\"\n              label=\"类型：\">\n  </aio-select>\n\n  <aio-select (change)=\"setStatus($event.option)\"\n              [options]=\"statuses\"\n              [selected]=\"status\"\n              [disabled]=\"type.value === 'package'\"\n              label=\"状态：\">\n  </aio-select>\n\n  <div class=\"form-search\">\n    <input #filter placeholder=\"过滤\" (input)=\"setQuery($any($event.target).value)\" aria-label=\"Filter Search\">\n    <em class=\"material-icons\">search</em>\n  </div>\n</div>\n\n<article class=\"api-list-container\">\n  <div *ngFor=\"let section of filteredSections | async\" >\n    <h2 *ngIf=\"section.items\"><a [href]=\"section.path\" [class.deprecated-api-item]=\"section.deprecated\">{{section.title}}</a></h2>\n    <ul class=\"api-list\" *ngIf=\"section.items && section.items.length\">\n      <ng-container *ngFor=\"let item of section.items\">\n        <li class=\"api-item\">\n          <a [href]=\"item.path\" [class.deprecated-api-item]=\"item.stability === 'deprecated'\">\n            <span class=\"symbol {{item.docType}}\"></span>\n            {{item.title}}\n          </a>\n        </li>\n      </ng-container>\n    </ul>\n  </div>\n</article>\n","/*\n* API List & Filter Component\n*\n* A page that displays a formatted list of the public Angular API entities.\n* Clicking on a list item triggers navigation to the corresponding API entity document.\n* Can add/remove API entity links based on filter settings.\n*/\n\nimport { Component, ElementRef, OnInit, ViewChild } from '@angular/core';\n\nimport { combineLatest, Observable, ReplaySubject } from 'rxjs';\n\nimport { LocationService } from 'app/shared/location.service';\nimport { ApiItem, ApiSection, ApiService } from './api.service';\n\nimport { Option } from 'app/shared/select/select.component';\nimport { map } from 'rxjs/operators';\n\nclass SearchCriteria {\n  query = '';\n  status = 'all';\n  type = 'all';\n}\n\n@Component({\n  selector: 'aio-api-list',\n  templateUrl: './api-list.component.html',\n})\nexport class ApiListComponent implements OnInit {\n\n  filteredSections: Observable<ApiSection[]>;\n\n  showStatusMenu = false;\n  showTypeMenu = false;\n\n  private criteriaSubject = new ReplaySubject<SearchCriteria>(1);\n  private searchCriteria = new SearchCriteria();\n\n  status: Option;\n  type: Option;\n\n  // API types\n  types: Option[] = [\n    { value: 'all', title: '全部' },\n    { value: 'class', title: '类' },\n    { value: 'const', title: '常量' },\n    { value: 'decorator', title: '装饰器' },\n    { value: 'directive', title: '指令' },\n    { value: 'element', title: '元素' },\n    { value: 'block', title: '块' },\n    { value: 'enum', title: '枚举' },\n    { value: 'function', title: '函数' },\n    { value: 'interface', title: '接口' },\n    { value: 'package', title: '包' },\n    { value: 'pipe', title: '管道' },\n    {  value: 'ngmodule', title: 'NgModule' },\n    { value: 'type-alias', title: '类型别名' },\n  ];\n\n  statuses: Option[] = [\n    { value: 'all', title: '全部' },\n    { value: 'stable', title: '稳定' },\n    { value: 'developer-preview', title: '开发者预览' },\n    { value: 'deprecated', title: '弃用' },\n    { value: 'security-risk', title: '安全风险' }\n  ];\n\n  @ViewChild('filter', { static: true }) queryEl: ElementRef;\n\n  constructor(\n    private apiService: ApiService,\n    private locationService: LocationService) { }\n\n  ngOnInit() {\n    this.filteredSections =\n        combineLatest([\n          this.apiService.sections,\n          this.criteriaSubject,\n        ]).pipe(\n          map( results => ({ sections: results[0], criteria: results[1]})),\n          map( results => (\n               results.sections\n                  .map(section => ({ ...section, items: this.filterSection(section, results.criteria) }))\n          ))\n        );\n\n    this.initializeSearchCriteria();\n  }\n\n  // TODO: may need to debounce as the original did\n  // although there shouldn't be any perf consequences if we don't\n  setQuery(query: string) {\n    this.setSearchCriteria({query: (query || '').toLowerCase().trim() });\n  }\n\n  setStatus(status: Option) {\n    this.toggleStatusMenu();\n    this.status = status;\n    this.setSearchCriteria({status: status.value});\n  }\n\n  setType(type: Option) {\n    this.toggleTypeMenu();\n    this.type = type;\n    this.setSearchCriteria({type: type.value});\n  }\n\n  toggleStatusMenu() {\n    this.showStatusMenu = !this.showStatusMenu;\n  }\n\n  toggleTypeMenu() {\n    this.showTypeMenu = !this.showTypeMenu;\n  }\n\n  //////// Private //////////\n\n  private filterSection(section: ApiSection, { query, status, type }: SearchCriteria) {\n    const sectionNameMatches = !query || section.name.indexOf(query) !== -1;\n\n    const matchesQuery = (item: ApiItem) =>\n      sectionNameMatches || item.name.indexOf(query) !== -1;\n    const matchesStatus = (item: ApiItem) =>\n      status === 'all' ||\n      status === item.stability ||\n      (status === 'security-risk' && item.securityRisk) ||\n      (status === 'developer-preview' && item.developerPreview);\n    const matchesType = (item: ApiItem) =>\n      type === 'all' || type === item.docType;\n\n    const items: ApiItem[] = (section.items || []).filter(item =>\n      matchesType(item) && matchesStatus(item) && matchesQuery(item));\n\n    // If there are no items we still return an empty array if the section name matches and the type is 'package'\n    return items.length ? items : (sectionNameMatches && type === 'package') ? [] : null;\n  }\n\n  // Get initial search criteria from URL search params\n  private initializeSearchCriteria() {\n    const {query, status, type} = this.locationService.search();\n\n    const q = (query || '').toLowerCase();\n    // Hack: can't bind to query because input cursor always forced to end-of-line.\n    this.queryEl.nativeElement.value = q;\n\n    this.status = this.statuses.find(x => x.value === status) || this.statuses[0];\n    this.type = this.types.find(x => x.value === type) || this.types[0];\n\n    this.searchCriteria = {\n      query: q,\n      status: this.status.value,\n      type: this.type.value\n    };\n\n    this.criteriaSubject.next(this.searchCriteria);\n  }\n\n  private setLocationSearch() {\n    const {query, status, type} = this.searchCriteria;\n    const params = {\n      query:  query ? query : undefined,\n      status: status !== 'all' ? status : undefined,\n      type:   type   !== 'all' ? type   : undefined\n    };\n\n    this.locationService.setSearch('API 搜索', params);\n  }\n\n  private setSearchCriteria(criteria: Partial<SearchCriteria>) {\n    this.criteriaSubject.next(Object.assign(this.searchCriteria, criteria));\n    this.setLocationSearch();\n  }\n}\n","import { NgModule, Type } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\nimport { SharedModule } from '../../shared/shared.module';\nimport { ApiListComponent } from './api-list.component';\nimport { ApiService } from './api.service';\nimport { WithCustomElementComponent } from '../element-registry';\n\n@NgModule({\n  imports: [ CommonModule, SharedModule, HttpClientModule ],\n  declarations: [ ApiListComponent ],\n  providers: [ ApiService ]\n})\nexport class ApiListModule implements WithCustomElementComponent {\n  customElementComponent: Type<any> = ApiListComponent;\n}\n"],"x_google_ignoreList":[]}